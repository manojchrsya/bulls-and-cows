<nav class="nav d-block list-discussions-js mb-n6">
  <!-- Chat link -->
  <% if (friends.length > 0) { %>
    <% friends.forEach((user) => { %>
      <a class="text-reset nav-link p-0 mb-6 friend" href="#" user-data="<%= JSON.stringify(user) %>" >
          <div class="card card-active-listener">
              <div class="card-body">
                  <div class="media">
                      <div class="avatar avatar-online mr-5">
                        <% if (user.profilePic) { %>
                          <img class="avatar-img" src="<%= user.profilePic.url %>" alt="<%= user.name %>">
                        <% } else { %>
                          <i class="icon-md fe-user"></i>
                        <% } %>
                      </div>
                      <div class="media-body overflow-hidden">
                          <div class="d-flex align-items-center mb-1">
                              <h6 class="text-truncate mb-0 mr-auto"><%= user.name %></h6>
                              <p class="small text-muted text-nowrap ml-4"><%= user.chat && user.chat.createdOn || '-' %></p>
                          </div>
                          <div class="text-truncate">
                            <% if (user.chat && (user._id.toString() === user.chat.receiverId)) { %> <b>You: </b> <% } %>
                            <%= user.chat && user.chat.message || 'Chat not avaiable.' %></div>
                          <!-- <div class="text-truncate">is typing<span class="typing-dots"><span>.</span><span>.</span><span>.</span></span></div> -->
                      </div>
                  </div>
              </div>
          </div>
      </a>
    <% }) %>
    <% } else { %>
      <div class="flex-column justify-content-center text-center">
          <h6>Contacts not found.</h6>
      </div>
    <% } %>
</nav>
